---
import MainLayout from "../../layouts/MainLayout.astro"

export async function getStaticPaths() {
	return [
		{ params: { tag: "astro" }, props: { posts: Object.values(import.meta.glob("../posts/*.md", { eager: true })) } },
		{
			params: { tag: "successes" },
			props: { posts: Object.values(import.meta.glob("../posts/*.md", { eager: true })) },
		},
		{
			params: { tag: "community" },
			props: { posts: Object.values(import.meta.glob("../posts/*.md", { eager: true })) },
		},
		{
			params: { tag: "blogging" },
			props: { posts: Object.values(import.meta.glob("../posts/*.md", { eager: true })) },
		},
		{
			params: { tag: "setbacks" },
			props: { posts: Object.values(import.meta.glob("../posts/*.md", { eager: true })) },
		},
		{
			params: { tag: "learning in public" },
			props: { posts: Object.values(import.meta.glob("../posts/*.md", { eager: true })) },
		},
	]
}

const { tag } = Astro.params
const { posts } = Astro.props
---

<MainLayout title={tag}>
	<h2>Posts tagged with {tag}</h2>
	<ul>
		{
			posts.map((post: any) => (
				<li>
					<a href={post.url}>{post.frontmatter.title}</a>
				</li>
			))
		}
	</ul>
</MainLayout>
